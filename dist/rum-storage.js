!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["rum-storage"]=n():e["rum-storage"]=n()}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.r(n),t.d(n,"STORAGE_DEFAULTS",function(){return i}),t.d(n,"NOT_FOUND",function(){return o}),t.d(n,"METHOD_NOT_ALLOWED",function(){return u}),t.d(n,"Storage",function(){return c});var i={index:"sid",indexDelimiter:"-"},o=404,u=405,c=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,i,n),this._init()}return function(e,n,t){n&&r(e.prototype,n),t&&r(e,t)}(e,[{key:"_init",value:function(){this._cache={}}},{key:"indexIn",value:function(e){if("string"==typeof this.index)return e[this.index];if(Array.isArray(this.index)){var n=[],t=!0,r=!1,i=void 0;try{for(var o,u=this.index[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var c=o.value;n.push(e[c])}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return n.join(this.indexDelimiter)}}},{key:"insert",value:function(e){var n=this,t=this.indexIn(e);return new Promise(function(r,i){n._cache.hasOwnProperty(t)?i(u):(n._cache[t]=e,r(n._cache[t]))})}},{key:"list",value:function(){var e=this;return new Promise(function(n,t){n(Object.keys(e._cache))})}},{key:"find",value:function(e){var n,t=this;return n="string"==typeof e?e:this.indexIn(e),new Promise(function(e,r){t._cache.hasOwnProperty(n)?e(t._cache[n]):r(o)})}},{key:"update",value:function(e){var n=this,t=this.indexIn(e);return new Promise(function(r,i){n._cache.hasOwnProperty(t)?(Object.assign(n._cache[t],e),r(n._cache[t])):i(o)})}},{key:"upsert",value:function(e){var n=this.indexIn(e);return this._cache.hasOwnProperty(n)?this.update(e):this.insert(e)}},{key:"replace",value:function(e){var n=this,t=this.indexIn(e);return new Promise(function(r,i){n._cache.hasOwnProperty(t)?(n._cache[t]=e,r(n._cache[t])):i(o)})}},{key:"remove",value:function(e){var n,t=this;return n="string"==typeof e?e:this.indexIn(e),new Promise(function(e,r){if(t._cache.hasOwnProperty(n)){var i=t._cache[n];delete t._cache[n],e(i)}else r(o)})}}]),e}();n.default=c}])});
//# sourceMappingURL=rum-storage.js.map